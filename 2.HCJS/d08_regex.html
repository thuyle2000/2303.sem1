<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>regex</title>
    <link rel="stylesheet" href="css/form.css">
</head>
<body>
    <h2>Regular expression (Bieu thuc qui tac)</h2>
    <hr>
    <form action="" name="formSV" id="formSV">
        <div>
            <label for="">student id </label>
            <input type="text" name="stID" id="stID" placeholder="nhap ma so (SVxx)" required>
        </div>

        <div>
            <label for="">student name</label>
            <input type="text" name="stName" id="stName" placeholder="nhap ho ten sinh vien" required>
        </div>

        <div>
            <label for="">email</label>
            <input type="email" name="email" id="email" placeholder="nhap email (abc@xxx.xx)">
        </div>

        <div style="text-align: center;">
            <br>
            <input type="submit" value="SUBMIT">
            <input type="reset" value="RESET">
        </div>
        <hr>
        <div>
            <label for="">Summary</label> <br>
            <textarea name="summary" id="summary" 
            cols="40" rows="3" readonly></textarea>
        </div>
    </form>

    <script>
        //lap trinh cho su kien submit tren form [formSV]
        document.getElementById("formSV").onsubmit=function(e){
            e.preventDefault(); //vo hieu hoa tinh nang mac dinh cua su kien e (chuc nang submit: ko chuyen trang action)

            //thu thap du lieu nhap, sau do hien thi trong o summary
            let sv_id = document.getElementById("stID").value.trim();
            let sv_name = document.getElementById("stName").value.trim();
            let sv_mail = document.getElementById("email").value.trim();


            //kiem tra ma so SV
            let ex = /^SV[0-9]{2}$/;
            if(!ex.test(sv_id )){
                alert("Invalid ID. Re-enter, plz !");
                document.getElementById("stID").focus();
                return false;
            }

            //kiem tra ho ten
            ex = /^[a-z ]{3,}$/ig;
            if(!ex.test(sv_name )){
                alert("Invalid name. Re-enter, plz !");
                document.getElementById("stName").focus();
                return false;
            }            

            //kiem tra email
            ex = /^[a-z]([a-z0-9\-_\.]+)+@([a-z1-9]+\.)+[a-z]{2,3}$/ig;
            if(!ex.test(sv_mail )){
                alert("Invalid email. Re-enter, plz !");
                document.getElementById("email").focus();
                return false;
            }


            let s = [];  //tao mang s[], chua co du lieu
            s.push(`id: ${sv_id}`);
            s.push(`name: ${sv_name}`);
            s.push(`email: ${sv_mail}`);

            //luu noi dung mang s[] vo o [summary]
            document.getElementById("summary").value = s.join("\n");

            

        }


    </script>
</body>
</html>